<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quimica — Estados de la Materia</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <style>
    :root{
      --blanco:#ffffff;
      --gris-claro:#e8ecf7;
      --gris:#bfc7da;
      --negro:#0d0f12;
      --azul:#0057ff;
      --acento:#3aa0ff;
      --vidrio: rgba(255,255,255,.06);
      --borde: rgba(255,255,255,.10);
      --texto-suave:#cfd7ff;
      --ok:#76e39a;
      --warn:#ffc06b;
      --err:#ff8b8b;
    }
    *{ box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI','Helvetica Neue',system-ui,sans-serif }
    body{
      min-height:100vh; color:var(--blanco);
      background:
        radial-gradient(1200px 600px at 80% -10%, #0c2a80 0%, transparent 60%),
        radial-gradient(1000px 500px at -10% 110%, #0a5cff 0%, transparent 55%),
        linear-gradient(135deg,#0b0b0b,#171717);
      display:flex; flex-direction:column; align-items:center;
      padding:28px 18px 60px;
    }
    .topbar{
      width:min(1200px, 100%);
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 18px; border-radius:18px;
      background:var(--vidrio); border:1px solid var(--borde);
      backdrop-filter: blur(10px);
      margin-bottom:22px;
      box-shadow:0 8px 28px rgba(0,0,0,.35);
    }
    .logo{ display:flex; gap:12px; align-items:center; }
    .logo-badge{
      width:38px; height:38px; border-radius:12px;
      background:linear-gradient(135deg, var(--azul), var(--acento));
      display:grid; place-items:center; font-weight:800;
      box-shadow:0 6px 20px rgba(0,87,255,.45);
    }
    .logo-text{ font-weight:700; letter-spacing:.3px; color:#e9f0ff }

    .nav{ display:flex; gap:8px; flex-wrap:wrap; }
    .btn{
      appearance:none; border:none; cursor:pointer; text-decoration:none;
      padding:10px 14px; border-radius:12px; font-weight:700; letter-spacing:.2px;
      background:rgba(255,255,255,.08); color:#eaeaea; border:1px solid rgba(255,255,255,.12);
      backdrop-filter:blur(6px);
      transition: transform .15s ease, background .2s ease, box-shadow .2s ease;
    }
    .btn:hover{ transform:translateY(-2px); background:rgba(255,255,255,.12); }
    .btn.toggle.on{ box-shadow:0 0 0 2px rgba(58,160,255,.5) inset; }

    header.hero{
      width:min(1200px, 100%);
      background:var(--vidrio); border:1px solid var(--borde);
      border-radius:22px; padding:28px 24px;
      backdrop-filter: blur(10px);
      margin-bottom:28px; position:relative;
      box-shadow:0 12px 36px rgba(0,0,0,.38);
    }
    header.hero h1{ font-size: clamp(1.9rem, 4.8vw, 2.8rem); color:#bcd4ff }
    .sub{ margin-top:8px; color:var(--texto-suave); }

    .contenedor{
      width:min(1200px, 100%);
      display:grid; gap:22px;
      grid-template-columns: 1.15fr .85fr;
    }
    @media (max-width: 980px){ .contenedor{ grid-template-columns: 1fr; } }
    .card{
      background:var(--vidrio); border:1px solid var(--borde);
      border-radius:20px; padding:22px; backdrop-filter: blur(8px);
      box-shadow:0 6px 18px rgba(0,0,0,.30);
    }
    .card h2, .card h3{ color:#cfe3ff; margin-bottom:10px }
    .card p, .card li{ color:var(--gris-claro) }
    .card ul{ padding-left:18px; line-height:1.6 }

    footer{ width:min(1200px, 100%); text-align:center; color:#bfbfbf; margin-top:32px; }

    /* ---------- Interactivo: Simulación de partículas ---------- */
    .sim-wrap{
      display:grid; gap:14px; justify-items:center;
    }
    .canvas-ring{
      position:relative;
      width:340px; height:340px;
      border-radius:50%;
      background:radial-gradient(120px 120px at 60% 30%, rgba(255,255,255,.08), transparent 60%),
                 rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 10px 30px rgba(0,0,0,0.35);
      display:grid; place-items:center;
      overflow:hidden;
    }
    canvas#simulacion{
      width:300px; height:300px;
      border-radius:50%;
      display:block;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,.35));
    }
    .controles{
      display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
    }
    .info-popup{
      width:100%;
      max-width:680px;
      padding:12px 14px;
      border-radius:12px;
      background:rgba(0,0,0,0.4);
      border:1px solid rgba(255,255,255,0.08);
      font-size:0.95rem;
      color:#e9f1ff;
    }
    .leyenda{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
      color:#cfd7ff; font-size:0.9rem;
    }
    .pill{
      padding:6px 10px; border-radius:999px;
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
    }

    /* Indicadores visuales suaves según estado */
    .estado-tag{
      font-weight:800; letter-spacing:.02em;
      background:linear-gradient(90deg, #7dd3fc, #3b82f6);
      -webkit-background-clip:text; background-clip:text;
      color:transparent;
      text-shadow: 0 0 14px rgba(59,130,246,.35);
    }
  </style>
</head>
<body>
  <!-- Barra superior -->
  <div class="topbar">
    <div class="logo">
      <div class="logo-badge">MS</div>
      <div class="logo-text">Los Mil Saberes</div>
    </div>
    <nav class="nav" aria-label="Navegación principal">
      <a class="btn" href="portada.html">Inicio</a>
      <a class="btn" href="index.html">Categorías</a>
    </nav>
  </div>

  <!-- Hero -->
  <header class="hero">
    <h1>Estados de la Materia</h1>
    <p class="sub">Observa cómo cambian las <span class="estado-tag">partículas</span> en sólido, líquido y gas — sin imágenes, todo animado con código.</p>
  </header>

  <!-- Contenido -->
  <section class="contenedor">
    <!-- Columna 1: teoría + interactivo -->
    <article class="card">
      <h2>1) Estados de la materia</h2>
      <p>La materia puede encontrarse en forma de <strong>sólido</strong>, <strong>líquido</strong> o <strong>gas</strong>, según la energía y la libertad de movimiento de sus partículas.</p>
      <ul>
        <li><strong>Sólido:</strong> Forma y volumen definidos. Las partículas vibran alrededor de posiciones fijas muy cercanas.</li>
        <li><strong>Líquido:</strong> Volumen definido, forma variable. Las partículas están próximas, se deslizan y fluyen.</li>
        <li><strong>Gas:</strong> Ni forma ni volumen definidos. Partículas muy separadas, con movimiento rápido y libre.</li>
      </ul>

      <h2 style="margin-top:12px;">2) Interactivo — Simulación de partículas</h2>
      <div class="sim-wrap">
        <div class="canvas-ring" role="img" aria-label="Simulación de partículas en diferentes estados de la materia">
          <canvas id="simulacion" width="300" height="300"></canvas>
        </div>

        <div class="controles" aria-label="Controles de simulación">
          <button class="btn" id="btnSolido">Sólido</button>
          <button class="btn" id="btnLiquido">Líquido</button>
          <button class="btn" id="btnGas">Gas</button>
          <button class="btn toggle" id="btnAuto" aria-pressed="false">Auto</button>
          <button class="btn" id="btnReiniciar">Reiniciar</button>
        </div>

        <div class="leyenda">
          <span class="pill">Cantidad de partículas: más en sólido, menos en gas</span>
          <span class="pill">Velocidad: baja (sólido) → alta (gas)</span>
          <span class="pill">Cohesión: fuerte en sólido, débil en gas</span>
        </div>

        <div id="info" class="info-popup">
          Estado actual: <strong>Sólido</strong>. Las partículas vibran en una red ordenada.
        </div>
      </div>

      <h3 style="margin-top:18px;">3) Cambios de estado (según energía térmica)</h3>
      <ul>
        <li><strong>Fusión:</strong> sólido → líquido (aumenta energía).</li>
        <li><strong>Evaporación:</strong> líquido → gas (aumenta energía).</li>
        <li><strong>Condensación:</strong> gas → líquido (disminuye energía).</li>
        <li><strong>Solidificación:</strong> líquido → sólido (disminuye energía).</li>
        <li><strong>Sublimación:</strong> sólido → gas (aumenta energía, sin fase líquida).</li>
        <li><strong>Deposición:</strong> gas → sólido (disminuye energía, sin fase líquida).</li>
      </ul>
    </article>

    <!-- Columna 2: mini-quiz -->
    <aside class="card">
      <h2>Mini-quiz</h2>
      <p><strong>Pregunta:</strong> ¿Cuál de estas opciones describe mejor un gas?</p>
      <label><input type="radio" name="q1" value="a"> A) Volumen definido y forma variable</label><br>
      <label><input type="radio" name="q1" value="b"> B) Forma y volumen definidos</label><br>
      <label><input type="radio" name="q1" value="c"> C) Sin forma ni volumen definidos</label>
      <div id="resultado" style="margin-top:10px;"></div>
      <div style="margin-top:10px; display:flex; gap:8px;">
        <button class="btn" id="btnVerificar">Verificar</button>
        <button class="btn" id="btnLimpiar">Limpiar</button>
      </div>

      <hr style="margin:18px 0; border-color: rgba(255,255,255,.1);">
      <p><strong>Reto:</strong> ¿Cómo se llama el paso de sólido a gas sin pasar por el líquido?</p>
      <label><input type="radio" name="q2" value="a"> A) Condensación</label><br>
      <label><input type="radio" name="q2" value="b"> B) Sublimación</label><br>
      <label><input type="radio" name="q2" value="c"> C) Evaporación</label>
      <div id="resultado2" style="margin-top:10px;"></div>
      <div style="margin-top:10px; display:flex; gap:8px;">
        <button class="btn" id="btnVerificar2">Verificar</button>
        <button class="btn" id="btnLimpiar2">Limpiar</button>
      </div>
    </aside>
  </section>

  <!-- Pie de página -->
  <footer>
    <p>&copy; 2025 Los Mil Saberes. Todos los derechos reservados.</p>
  </footer>

  <!-- Scripts -->
  <script>
    // ---------- Simulación de partículas sin imágenes ----------
    const canvas = document.getElementById("simulacion");
    const ctx = canvas.getContext("2d");
    const W = canvas.width, H = canvas.height;
    const CX = W/2, CY = H/2, R = Math.min(W, H)/2 - 6; // radio del borde interior
    let particulas = [];
    let estadoActual = 'solido';
    let auto = false;
    let autoTimer = null;

    const info = document.getElementById('info');

    // Utilidades
    function dentroDelCirculo(x, y){
      const dx = x - CX, dy = y - CY;
      return Math.hypot(dx, dy) <= R - 3;
    }

    function posAleatoriaDentro(){
      let x, y;
      do{
        x = CX + (Math.random()*2-1) * (R-6);
        y = CY + (Math.random()*2-1) * (R-6);
      }while(!dentroDelCirculo(x,y));
      return {x,y};
    }

    // Crear partículas con comportamiento por estado
    function crearParticulas(estado){
      particulas = [];
      if(estado === 'solido'){
        // Colocamos una "red" hexagonal aproximada para simular orden
        const filas = 8, cols = 8;
        const sep = (R*1.6)/Math.max(filas, cols); // separación
        const offsetX = CX - (cols-1)*sep/2;
        const offsetY = CY - (filas-1)*sep/2;
        for(let i=0;i<filas;i++){
          for(let j=0;j<cols;j++){
            const x = offsetX + j*sep + (i%2? sep/2:0);
            const y = offsetY + i*sep*0.9;
            if(dentroDelCirculo(x,y)){
              particulas.push({
                x, y,
                vx: 0, vy: 0,
                homeX: x, homeY: y, // anclaje (vibración)
                r: 3.2
              });
            }
          }
        }
      }
      else if(estado === 'liquido'){
        // Menos partículas, apiladas en el "fondo" del círculo
        const n = 50;
        for(let i=0;i<n;i++){
          let p = posAleatoriaDentro();
          // Empujar ligeramente hacia la parte baja
          p.y = Math.min(CY + R*0.6, p.y + Math.random()*R*0.3);
          particulas.push({ x:p.x, y:p.y, vx: (Math.random()-0.5)*0.6, vy: (Math.random()-0.5)*0.6, r: 3.5 });
        }
      }
      else{ // gaseoso
        const n = 28;
        for(let i=0;i<n;i++){
          let p = posAleatoriaDentro();
          particulas.push({ x:p.x, y:p.y, vx: (Math.random()-0.5)*1.8, vy: (Math.random()-0.5)*1.8, r: 3 });
        }
      }
    }

    function setEstado(estado){
      estadoActual = estado;
      if(estado === 'solido'){
        crearParticulas('solido');
        info.innerHTML = 'Estado actual: <strong>Sólido</strong>. Las partículas vibran en posiciones casi fijas y ordenadas.';
      }else if(estado === 'liquido'){
        crearParticulas('liquido');
        info.innerHTML = 'Estado actual: <strong>Líquido</strong>. Las partículas están próximas y fluyen unas sobre otras.';
      }else{
        crearParticulas('gaseoso');
        info.innerHTML = 'Estado actual: <strong>Gas</strong>. Las partículas están muy separadas y se mueven rápidamente.';
      }
    }

    // Física simple por estado
    function step(){
      ctx.clearRect(0,0,W,H);

      // Fondo suave dinámico (muy sutil)
      const grad = ctx.createRadialGradient(CX, CY, R*0.1, CX, CY, R);
      if(estadoActual === 'solido'){
        grad.addColorStop(0, "rgba(200,220,255,0.08)");
        grad.addColorStop(1, "rgba(255,255,255,0.00)");
      }else if(estadoActual === 'liquido'){
        grad.addColorStop(0, "rgba(120,180,255,0.10)");
        grad.addColorStop(1, "rgba(255,255,255,0.00)");
      }else{
        grad.addColorStop(0, "rgba(255,255,255,0.16)");
        grad.addColorStop(1, "rgba(255,255,255,0.00)");
      }
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.arc(CX, CY, R, 0, Math.PI*2);
      ctx.fill();

      // Dibujar y actualizar partículas
      for(let i=0;i<particulas.length;i++){
        const p = particulas[i];

        if(estadoActual === 'solido'){
          // Vibración alrededor de su punto anclaje (pequeños resortes)
          const k = 0.02;  // constante de resorte
          const damping = 0.9;
          const ax = (p.homeX - p.x) * k + (Math.random()-0.5)*0.02;
          const ay = (p.homeY - p.y) * k + (Math.random()-0.5)*0.02;
          p.vx = (p.vx + ax) * damping;
          p.vy = (p.vy + ay) * damping;
          p.x += p.vx;
          p.y += p.vy;
        }
        else if(estadoActual === 'liquido'){
          // Ligera cohesión hacia el centro y "gravedad" suave
          const toCenterX = (CX - p.x) * 0.002;
          const toCenterY = (CY + R*0.2 - p.y) * 0.002; // empuja un poco hacia abajo
          p.vx += toCenterX + (Math.random()-0.5)*0.05;
          p.vy += toCenterY + 0.03 + (Math.random()-0.5)*0.05;

          // Límite de velocidad
          const maxV = 1.1;
          p.vx = Math.max(Math.min(p.vx, maxV), -maxV);
          p.vy = Math.max(Math.min(p.vy, maxV), -maxV);

          p.x += p.vx;
          p.y += p.vy;

          // Rebote circular
          const dx = p.x - CX, dy = p.y - CY;
          const dist = Math.hypot(dx, dy);
          if(dist > R - p.r){
            const nx = dx/dist, ny = dy/dist;
            // reflejar velocidad
            const dot = p.vx*nx + p.vy*ny;
            p.vx -= 2*dot*nx; p.vy -= 2*dot*ny;
            // reubicar dentro
            p.x = CX + nx*(R - p.r);
            p.y = CY + ny*(R - p.r);
          }
        }
        else{ // gas
          // Movimiento rápido y casi libre
          p.vx += (Math.random()-0.5)*0.12;
          p.vy += (Math.random()-0.5)*0.12;

          // Límite de velocidad alto
          const maxV = 2.6;
          p.vx = Math.max(Math.min(p.vx, maxV), -maxV);
          p.vy = Math.max(Math.min(p.vy, maxV), -maxV);

          p.x += p.vx;
          p.y += p.vy;

          // Rebote circular elástico
          const dx = p.x - CX, dy = p.y - CY;
          const dist = Math.hypot(dx, dy);
          if(dist > R - p.r){
            const nx = dx/dist, ny = dy/dist;
            const dot = p.vx*nx + p.vy*ny;
            p.vx -= 2*dot*nx; p.vy -= 2*dot*ny;
            p.x = CX + nx*(R - p.r);
            p.y = CY + ny*(R - p.r);
          }
        }

        // Dibujo con ligero brillo
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        if(estadoActual === 'solido'){
          ctx.fillStyle = "rgba(190, 220, 255, 0.95)";
        }else if(estadoActual === 'liquido'){
          ctx.fillStyle = "rgba(120, 180, 255, 0.95)";
        }else{
          ctx.fillStyle = "rgba(255,255,255,0.9)";
        }
        ctx.shadowBlur = 6;
        ctx.shadowColor = "rgba(0,0,0,0.35)";
        ctx.fill();
        ctx.shadowBlur = 0;
      }

      requestAnimationFrame(step);
    }

    // Controles
    const btnSolido = document.getElementById('btnSolido');
    const btnLiquido = document.getElementById('btnLiquido');
    const btnGas    = document.getElementById('btnGas');
    const btnAuto   = document.getElementById('btnAuto');
    const btnRein   = document.getElementById('btnReiniciar');

    function marcarBotonActivo(btn){
      [btnSolido, btnLiquido, btnGas].forEach(b => b.classList.remove('on'));
      btn.classList.add('on');
    }

    btnSolido.addEventListener('click', () => { setEstado('solido'); marcarBotonActivo(btnSolido); });
    btnLiquido.addEventListener('click', () => { setEstado('liquido'); marcarBotonActivo(btnLiquido); });
    btnGas.addEventListener('click',    () => { setEstado('gaseoso'); marcarBotonActivo(btnGas); });

    btnRein.addEventListener('click', () => setEstado(estadoActual));

    btnAuto.addEventListener('click', () => {
      auto = !auto;
      btnAuto.classList.toggle('on', auto);
      btnAuto.setAttribute('aria-pressed', String(auto));
      if(auto){
        let idx = ['solido','liquido','gaseoso'].indexOf(estadoActual);
        autoTimer = setInterval(() => {
          idx = (idx + 1) % 3;
          const next = ['solido','liquido','gaseoso'][idx];
          setEstado(next);
          if(next==='solido') marcarBotonActivo(btnSolido);
          if(next==='liquido') marcarBotonActivo(btnLiquido);
          if(next==='gaseoso') marcarBotonActivo(btnGas);
        }, 3500);
      }else{
        clearInterval(autoTimer);
      }
    });

    // Inicializar
    setEstado('solido');
    marcarBotonActivo(btnSolido);
    step();

    // ---------- Mini-quiz ----------
    const btnVerificar = document.getElementById('btnVerificar');
    const btnLimpiar   = document.getElementById('btnLimpiar');
    const res1         = document.getElementById('resultado');

    btnVerificar.addEventListener('click', () => {
      const seleccion = document.querySelector('input[name="q1"]:checked');
      if(!seleccion){
        res1.textContent = 'Selecciona una opción.';
        res1.style.color = '#ff8b8b';
      } else if(seleccion.value === 'c'){
        res1.textContent = '¡Correcto! Un gas no tiene forma ni volumen definidos.';
        res1.style.color = '#76e39a';
      } else {
        res1.textContent = 'Incorrecto. La respuesta correcta es: sin forma ni volumen definidos.';
        res1.style.color = '#ff8b8b';
      }
    });

    btnLimpiar.addEventListener('click', () => {
      document.querySelectorAll('input[name="q1"]').forEach(r => r.checked = false);
      res1.textContent = '';
      res1.style.color = '';
    });

    const btnVerificar2 = document.getElementById('btnVerificar2');
    const btnLimpiar2   = document.getElementById('btnLimpiar2');
    const res2          = document.getElementById('resultado2');

    btnVerificar2.addEventListener('click', () => {
      const seleccion = document.querySelector('input[name="q2"]:checked');
      if(!seleccion){
        res2.textContent = 'Selecciona una opción.';
        res2.style.color = '#ff8b8b';
      } else if(seleccion.value === 'b'){
        res2.textContent = '¡Correcto! Se llama sublimación.';
        res2.style.color = '#76e39a';
      } else {
        res2.textContent = 'Incorrecto. La respuesta correcta es sublimación.';
        res2.style.color = '#ff8b8b';
      }
    });

    btnLimpiar2.addEventListener('click', () => {
      document.querySelectorAll('input[name="q2"]').forEach(r => r.checked = false);
      res2.textContent = '';
      res2.style.color = '';
    });
  </script>
</body>
</html>
